<%= form_for(@character) do |f| %>
  <% if @character.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@character.errors.count, "error") %> prohibited this character from being saved:</h2>

      <ul>
      <% @character.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <table class="four_cells">
    <tr>
      <td><b><%= f.label :name %></b></td>
      <td><%= f.text_field :name %></td>
    <% if @obsidian_characters %>
      <td><b><%= f.label :obsidian_character_id, "Obsidian Portal" %></b></td>
      <td><%= f.select :obsidian_character_id, @obsidian_characters %></td>
    <% end %>
    </tr>
    <tr>
      <td><b><%= f.label :concept %></b></td>
      <td colspan='3'><%= f.text_field :concept, :class => 'long' %></td>
    </tr>
    <tr>
      <td><b><%= label_tag 'chronicle_id', "Chronicle" %></b></td>
      <td>
        <%= select_tag :chronicle_id, options_from_collection_for_select(@chronicle_list, 'id', 'name', @character.chronicle.id), :remote => true, :action => update_chronicle_characters_path %>
        <input name="character[chronicle_id]" type="hidden" value="<%= @character.chronicle.id %>" id="character_chronicle_id">
      </td>
      <td><b><%= label_tag 'splat_id', "Template" %></b></td>
      <td>
        <%= select_tag :splat_id, options_from_collection_for_select(@splat_list, 'id', 'name', @character.splat.id), :remote => true, :action => update_splat_characters_path %>
        <input name="character[splat_id]" type="hidden" value="<%= @character.splat_id %>" id="character_splat_id" />
      </td>
    </tr>
    <tr>
      <td><b><%= f.label :virtue %></b></td>
      <td><%= f.select :virtue, Character::VIRTUES %></td>
      <td class="label" id="nature_label_cell" <%= "style='display: none'" if @character.splat.name == "Mortal" %> >
        <b><%= label_tag 'nature_id', @character.splat.nature_name, :id => "nature_label" %></b>
      </td>
      <td class="data" id="nature_id_cell" <%= "style='display: none'" if @character.splat.name == "Mortal" %> >
        <%= select_tag :nature_id, options_from_collection_for_select(@nature_list, 'id', 'name', @character.nature.id), :remote => true, :action => update_nature_characters_path %>
        <input name="character[nature_id]" type="hidden" value="<%= @character.nature_id %>" id="character_nature_id" />
      </td>
    </tr>
    <tr>
      <td rowspan='3' class='growdown'><b><%= label_tag 'character_vice', "Vice" %></b></td>
      <td rowspan='3' class='growdown'><%= select_tag "character_vice[]", options_for_select(Character::VICES, @character.vice.split(" ")), :multiple => true, :size => 4, :id => "character[vice]" %></td>
      <td class="label" id="subnature_label_cell" <%= "style='display: none'" if @character.splat.name != "Changeling" %>>
        <b><%= label_tag 'character_subnature_id', @character.splat.subnature_name, :id => "subnature_label" %></b>
      </td>
      <td class="data" id="subnature_id_cell" <%= "style='display: none'" if @character.splat.name != "Changeling" %>>
        <%= f.select :subnature_id, options_from_collection_for_select(@subnature_list, 'id', 'name', @character.subnature_id) %>
      </td>
    </tr>
    <tr>
      <td class="label" id="ideology_label_cell" <%= "style='display: none'" if @character.splat.name == "Mortal" %>>
        <b><%= f.label :ideology_id, @character.splat.ideology_name, :id => "ideology_label" %></b>
      </td>
      <td class="data" id="ideology_id_cell" <%= "style='display: none'" if @character.splat.name == "Mortal" %>>
        <%= f.select :ideology_id, options_from_collection_for_select(@ideology_list, 'id', 'name', @character.ideology.id) %>
      </td>
    </tr>
    <tr>
      <td><b><%= f.label :clique_id, @character.splat.clique_name, :id => "clique_label" %></b></td>
      <td><%= f.select :clique_id, @clique_list %></td>
    </tr>
    <tr>
      <td><%= f.check_box :read_name %> <%= f.label :read_name, "Reveal name" %></td>
      <td>
      	<span id="read_nature_span" <%= "style='display: none'" if @character.splat.name == "Mortal" %> >
          <%= f.check_box :read_nature %> <%= f.label :read_nature, "Reveal " + @character.splat.nature_name, :id => "read_nature_label" %>
        </span>
      </td>
      <td>
        <span id="read_ideology_span" <%= "style='display: none'" if @character.splat.name == "Mortal" %> >
          <%= f.check_box :read_ideology %> <%= f.label :read_ideology, "Reveal " + @character.splat.ideology_name, :id => "read_ideology_label" %>
        </span>
      </td>
      <td><%= f.check_box :read_clique %> <%= f.label :read_clique, "Reveal " + @character.splat.clique_name, :id => "read_clique_label" %></td>
    </tr>
  </table>

  
  <h3 class='<%= @character.splat.name.downcase %>'>Description</h3>
  <p><%= f.text_area :description %></p>
  <%= f.check_box :read_description %> <%= f.label :read_description, "Reveal description" %>


  <h3 class='<%= @character.splat.name.downcase %>'>Background</h3>
  <p><%= f.text_area :background %></p>
  <%= f.check_box :read_background %> <%= f.label :read_background, "Reveal background" %>


  <h3 class='<%= @character.splat.name.downcase %>'>Deeds</h3>
  <p><%= f.text_area :deeds %></p>
  <%= f.check_box :read_deeds %> <%= f.label :read_deeds, "Reveal known deeds" %>


  <h3 class='<%= @character.splat.name.downcase %>'>Attributes</h3>
  <table class="six_cells">
    <tr>
      <td><%= f.label :intelligence %></td>
      <td><%= f.text_field :intelligence, :class => "number" %></td>
      <td><%= f.label :strength %></td>
      <td><%= f.text_field :strength, :class => "parent_number" %></td>
      <td><%= f.label :presence %></td>
      <td><%= f.text_field :presence, :class => "number" %></td>
    </tr>
    <tr>
      <td><%= f.label :wits %></td>
      <td><%= f.text_field :wits, :class => "parent_number" %></td>
      <td><%= f.label :dexterity %></td>
      <td><%= f.text_field :dexterity, :class => "parent_number" %></td>
      <td><%= f.label :manipulation %></td>
      <td><%= f.text_field :manipulation, :class => "number" %></td>
    </tr>
    <tr>
      <td><%= f.label :resolve %></td>
      <td><%= f.text_field :resolve, :class => "parent_number" %></td>
      <td><%= f.label :stamina %></td>
      <td><%= f.text_field :stamina, :class => "parent_number" %></td>
      <td><%= f.label :composure %></td>
      <td><%= f.text_field :composure, :class => "parent_number" %></td>
    </tr>
  </table>


  <h3 class='<%= @character.splat.name.downcase %>'>Skills</h3>
  <table class="six_cells">
    <tr>
      <td><%= f.label :academics %></td>
      <td><%= f.text_field :academics, :class => "number" %></td>
      <td><%= f.label :athletics %></td>
      <td><%= f.text_field :athletics, :class => "number" %></td>
      <td><%= f.label :animal_ken %></td>
      <td><%= f.text_field :animal_ken, :class => "number" %></td>
    </tr>
    <tr>
      <td><%= f.label :computer %></td>
      <td><%= f.text_field :computer, :class => "number" %></td>
      <td><%= f.label :brawl %></td>
      <td><%= f.text_field :brawl, :class => "number" %></td>
      <td><%= f.label :empathy %></td>
      <td><%= f.text_field :empathy, :class => "number" %></td>
    </tr>
    <tr>
      <td><%= f.label :crafts %></td>
      <td><%= f.text_field :crafts, :class => "number" %></td>
      <td><%= f.label :drive %></td>
      <td><%= f.text_field :drive, :class => "number" %></td>
      <td><%= f.label :expression %></td>
      <td><%= f.text_field :expression, :class => "number" %></td>
    </tr>
    <tr>
      <td><%= f.label :investigation %></td>
      <td><%= f.text_field :investigation, :class => "number" %></td>
      <td><%= f.label :firearms %></td>
      <td><%= f.text_field :firearms, :class => "number" %></td>
      <td><%= f.label :intimidation %></td>
      <td><%= f.text_field :intimidation, :class => "number" %></td>
    </tr>
    <tr>
      <td><%= f.label :medicine %></td>
      <td><%= f.text_field :medicine, :class => "number" %></td>
      <td><%= f.label :larceny %></td>
      <td><%= f.text_field :larceny, :class => "number" %></td>
      <td><%= f.label :persuasion %></td>
      <td><%= f.text_field :persuasion, :class => "number" %></td>
    </tr>
    <tr>
      <td><%= f.label :occult %></td>
      <td><%= f.text_field :occult, :class => "number" %></td>
      <td><%= f.label :stealth %></td>
      <td><%= f.text_field :stealth, :class => "number" %></td>
      <td><%= f.label :socialize %></td>
      <td><%= f.text_field :socialize, :class => "number" %></td>
    </tr>
    <tr>
      <td><%= f.label :politics %></td>
      <td><%= f.text_field :politics, :class => "number" %></td>
      <td><%= f.label :survival %></td>
      <td><%= f.text_field :survival, :class => "number" %></td>
      <td><%= f.label :streetwise %></td>
      <td><%= f.text_field :streetwise, :class => "number" %></td>
    </tr>
    <tr>
      <td><%= f.label :science %></td>
      <td><%= f.text_field :science, :class => "number" %></td>
      <td><%= f.label :weaponry %></td>
      <td><%= f.text_field :weaponry, :class => "number" %></td>
      <td><%= f.label :subterfuge %></td>
      <td><%= f.text_field :subterfuge, :class => "number" %></td>
    </tr>
    <tr>
      <td><%= f.label :skill_specialties %></td>
      <td colspan="5" class="growdown"><%= f.text_area :skill_specialties %></td>
    </tr>
  </table>


  <h3 class='<%= @character.splat.name.downcase %>'>Advantages</h3>
  <table class="four_cells">
    <tr>
      <td><%= f.label :health %></td>
      <td><%= f.text_field :health, :class => "number" %></td>
      <td><%= f.label :willpower %></td>
      <td><%= f.text_field :willpower, :class => "number" %></td>
    </tr>
    <tr>
      <td><%= f.label :current_health %></td>
      <td><%= f.text_field :current_health %></td>
      <td><%= f.label :current_willpower %></td>
      <td><%= f.text_field :current_willpower %></td>
    </tr>
    <tr>
      <td><%= f.label :size %></td>
      <td><%= f.text_field :size, :class => "number" %></td>
      <td colspan="2"><%= f.label :derangements %></td>
    </tr>
    <tr>
      <td><%= f.label :initiative %></td>
      <td><%= f.text_field :initiative, :class => "number" %></td>
      <td rowspan="8" colspan="2" class="growdown"><%= f.text_area :derangements %></td>
    </tr>
    <tr>
      <td><%= f.label :speed %></td>
      <td><%= f.text_field :speed, :class => "number" %></td>
    </tr>
    <tr>
      <td><%= f.label :defense %></td>
      <td><%= f.text_field :defense, :class => "number" %></td>
    </tr>
    <tr>
      <td><%= f.label :armor %></td>
      <td><%= f.text_field :armor, :class => "number" %></td>
    </tr>
    <tr>
      <td><%= f.label :morality, @character.splat.morality_name, :id => "morality_label" %></td>
      <td><%= f.text_field :morality, :class => "number" %></td>
    </tr>
    <tr>
      <td class="label" id="power_stat_label_cell" <%= "style='display: none'" if @character.is_mortal? %> >
        <%= f.label :power_stat, @character.splat.power_stat_name, :id => "power_stat_label" %>
      </td>
      <td class="data" id="power_stat_cell" <%= "style='display: none'" if @character.is_mortal? %> >
        <%= f.text_field :power_stat, :class => "number" %>
      </td>
    </tr>
    <tr>
      <td class="label" id="max_fuel_label_cell" <%= "style='display: none'" if @character.is_mortal? %> >
        <%= f.label :max_fuel, "Max #{@character.splat.fuel_name}", :id => "max_fuel_label" %>
      </td>
      <td class="data" id="max_fuel_cell" <%= "style='display: none'" if @character.is_mortal? %> >
        <%= f.text_field :max_fuel, :class => "number" %>
      </td>
    </tr>
    <tr>
      <td class="label" id="current_fuel_label_cell" <%= "style='display: none'" if @character.is_mortal? %> >
        <%= f.label :current_fuel, "Current #{@character.splat.fuel_name}", :id => "current_fuel_label" %>
      </td>
      <td class="data" id="current_fuel_cell" <%= "style='display: none'" if @character.is_mortal? %> >
        <%= f.text_field :current_fuel, :class => "number" %>
      </td>
    </tr>
  </table>
  
  
  <h3 class='<%= @character.splat.name.downcase %>'>Merits</h3>
  <p><%= f.text_area :merits %></p>
  
  
  <h3 class='<%= @character.splat.name.downcase %>'>Equipment</h3>
  <p><%= f.text_area :equipment %></p>
  
  
  <div id="mage_powers" <%= "style='display: none'" unless @character.is_mage? %> >
    <h3 class='<%= @character.splat.name.downcase %>'>Arcana</h3>
    <table class="three_cells">
      <tr>
        <td><%= f.label :death %></td>
        <td><%= f.text_field :death, :class => "number" %></td>
        <td><%= f.label :common_spells %></td>
      </tr>
      <tr>
        <td><%= f.label :fate %></td>
        <td><%= f.text_field :fate, :class => "number" %></td>
        <td rowspan="9" class="growdown"><%= f.text_area :common_spells %></td>
      </tr>
      <tr>
        <td><%= f.label :forces %></td>
        <td><%= f.text_field :forces, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :life %></td>
        <td><%= f.text_field :life, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :matter %></td>
        <td><%= f.text_field :matter, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :mind %></td>
        <td><%= f.text_field :mind, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :prime %></td>
        <td><%= f.text_field :prime, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :space %></td>
        <td><%= f.text_field :space, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :spirit %></td>
        <td><%= f.text_field :spirit, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :time %></td>
        <td><%= f.text_field :time, :class => "number" %></td>
      </tr>
    </table>
  </div>
  
  
  <div id="woof_powers" <%= "style='display: none'" unless @character.is_werewolf? %> >
    <h3 class='<%= @character.splat.name.downcase %>'>Renown</h3>
    <table class="three_cells">
      <tr>
        <td><%= f.label :purity %></td>
        <td><%= f.text_field :purity, :class => "number" %></td>
        <td><%= f.label :gifts %></td>
      </tr>
      <tr>
        <td><%= f.label :glory %></td>
        <td><%= f.text_field :glory, :class => "number" %></td>
        <td rowspan="4" class="growdown"><%= f.text_area :gifts %></td>
      </tr>
      <tr>
        <td><%= f.label :honor %></td>
        <td><%= f.text_field :honor, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :wisdom %></td>
        <td><%= f.text_field :wisdom, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :cunning %></td>
        <td><%= f.text_field :cunning, :class => "number" %></td>
      </tr>
    </table>
  </div>
  
  
  <div id="vampire_powers" <%= "style='display: none'" unless @character.is_vampire? %> >
    <h3 class='<%= @character.splat.name.downcase %>'>Disciplines</h3>
    <table class="three_cells">
      <tr>
        <td><%= f.label :animalism %></td>
        <td><%= f.text_field :animalism, :class => "number" %></td>
        <td><%= f.label :covenant_disciplines %></td>
      </tr>
      <tr>
        <td><%= f.label :auspex %></td>
        <td><%= f.text_field :auspex, :class => "number" %></td>
        <td rowspan="9" class="growdown"><%= f.text_area :covenant_disciplines %></td>
      </tr>
      <tr>
        <td><%= f.label :celerity %></td>
        <td><%= f.text_field :celerity, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :dominate %></td>
        <td><%= f.text_field :dominate, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :majesty %></td>
        <td><%= f.text_field :majesty, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :nightmare %></td>
        <td><%= f.text_field :nightmare, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :obfuscate %></td>
        <td><%= f.text_field :obfuscate, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :protean %></td>
        <td><%= f.text_field :protean, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :resilience %></td>
        <td><%= f.text_field :resilience, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :vigor %></td>
        <td><%= f.text_field :vigor, :class => "number" %></td>
      </tr>
    </table>
  </div>
  
  
  <div id="promethean_powers" <%= "style='display: none'" unless @character.is_promethean? %> >
    <h3 class='<%= @character.splat.name.downcase %>'>Transmutations</h3>
    <p><%= f.text_area :transmutations %></p>
  </div>
  
  
  <div id="changeling_powers" <%= "style='display: none'" unless @character.is_changeling? %> >
    <h3 class='<%= @character.splat.name.downcase %>'>Contracts</h3>
    <table class="three_cells">
      <tr>
        <td><%= f.label :dream %></td>
        <td><%= f.text_field :dream, :class => "number" %></td>
        <td><%= f.label :goblin_contracts %></td>
      </tr>
      <tr>
        <td><%= f.label :hearth %></td>
        <td><%= f.text_field :hearth, :class => "number" %></td>
        <td rowspan="17" class="growdown"><%= f.text_area :goblin_contracts %></td>
      </tr>
      <tr>
        <td><%= f.label :mirror %></td>
        <td><%= f.text_field :mirror, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :smoke %></td>
        <td><%= f.text_field :smoke, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :artifice %></td>
        <td><%= f.text_field :artifice, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :darkness %></td>
        <td><%= f.text_field :darkness, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :elements %></td>
        <td><%= f.text_field :elements, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :fang_and_tooth %></td>
        <td><%= f.text_field :fang_and_tooth, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :stone %></td>
        <td><%= f.text_field :stone, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :vainglory %></td>
        <td><%= f.text_field :vainglory, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :fleeting_spring %></td>
        <td><%= f.text_field :fleeting_spring, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :eternal_spring %></td>
        <td><%= f.text_field :eternal_spring, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :fleeting_summer %></td>
        <td><%= f.text_field :fleeting_summer, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :eternal_summer %></td>
        <td><%= f.text_field :eternal_summer, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :fleeting_autumn %></td>
        <td><%= f.text_field :fleeting_autumn, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :eternal_autumn %></td>
        <td><%= f.text_field :eternal_autumn, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :fleeting_winter %></td>
        <td><%= f.text_field :fleeting_winter, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :eternal_winter %></td>
        <td><%= f.text_field :eternal_winter, :class => "number" %></td>
      </tr>
    </table>
  </div>
  
  
  <div id="hunter_powers" <%= "style='display: none'" unless @character.is_hunter? %> >
    <h3 class='<%= @character.splat.name.downcase %>'>Tactics</h3>
    <p><%= f.text_area :tactics %></p>
  </div>
  
  
  <div id="geist_powers" <%= "style='display: none'" unless @character.is_geist? %> >
    <h3 class='<%= @character.splat.name.downcase %>'>Manifestations</h3>
    <table class="three_cells">
      <tr>
        <td><%= f.label :boneyard %></td>
        <td><%= f.text_field :boneyard, :class => "number" %></td>
        <td><%= f.label :keys %></td>
      </tr>
      <tr>
        <td><%= f.label :caul %></td>
        <td><%= f.text_field :caul, :class => "number" %></td>
        <td rowspan="6" class="growdown"><%= f.text_area :keys %></td>
      </tr>
      <tr>
        <td><%= f.label :curse %></td>
        <td><%= f.text_field :curse, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :oracle %></td>
        <td><%= f.text_field :oracle, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :marionette %></td>
        <td><%= f.text_field :marionette, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :rage %></td>
        <td><%= f.text_field :rage, :class => "number" %></td>
      </tr>
      <tr>
        <td><%= f.label :shroud %></td>
        <td><%= f.text_field :shroud, :class => "number" %></td>
      </tr>
    </table>
    
    <h3 class='<%= @character.splat.name.downcase %>'>Ceremonies</h3>
    <p><%= f.text_area :ceremonies %></p>
  </div>
  <%= f.check_box :read_crunch %> <%= f.label :read_crunch, "Reveal crunch", :title => "Crunch is defined as a character's attributes, skills, advantages, merits, equipment and any supernatural powers" %>


  <h3 class='<%= @character.splat.name.downcase %>'>Experience</h3>
  <p><%= f.text_area :experience %></p>
  <%= f.check_box :read_experience %> <%= f.label :read_experience, "Reveal experience" %>
  

  <h3 class='<%= @character.splat.name.downcase %>'>Notes</h3>
  <p><%= f.text_area :notes %></p>
  <%= f.check_box :read_notes %> <%= f.label :read_notes, "Reveal notes" %>
  <br />

  
  <%= f.submit 'Save' %>
<% end %>
