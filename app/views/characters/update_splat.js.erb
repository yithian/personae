// update the hidden fields in the form
$('#character_splat_id').val('<%= @splat.id.to_s %>');
$('#character_nature_id').val('<%= @nature_list.first.id %>');

// update the splat-specific terms
$('#clique_label').html('<%= @splat.clique_name %>');
$('#read_clique_label').html('Reveal <%= @splat.clique_name %>');
$('#nature_label').html('<%= @splat.nature_name %>');
$('#nature_id').html('<%= options_from_collection_for_select(@nature_list, "id", "name").gsub(/[\n]/, "").gsub(/[\']/, "&#39").html_safe %>');
$('#subnature_label').html('<%= @splat.subnature_name %>');
$('#character_subnature_id').html('<%= options_from_collection_for_select(@subnature_list, "id", "name").gsub(/[\n]/, "").gsub(/[\']/, "&#39").html_safe %>');
$('#read_nature_label').html('Reveal <%= @splat.nature_name %>');
$('#ideology_label').html('<%= @splat.ideology_name %>');
$('#character_ideology_id').html('<%= options_from_collection_for_select(@ideology_list, "id", "name").gsub(/[\n]/, "").gsub(/[\']/, "&#39").html_safe %>');
$('#read_ideology_label').html('Reveal <%= @splat.ideology_name %>');
$('#morality_label').html('<%= @splat.morality_name %>');
$('#power_stat_label').html('<%= @splat.power_stat_name %>');
$('#max_fuel_label').html('Max <%= @splat.fuel_name %>');
$('#current_fuel_label').html('Current <%= @splat.fuel_name %>');

// update the h3 smudge color
$('h5').attr('class', '<%= @splat.name.downcase %>');

// show or hide only the appropriate fields
<% if @splat.name == "Mortal" or @splat.name == "Spirit" %>
  $('#nature_label_cell').hide();
  $('#nature_id_cell').hide();
  $('#ideology_label_cell').hide();
  $('#ideology_id_cell').hide();
  $('#read_nature_span').hide();
  $('#read_ideology_span').hide();
  $('#power_stat_label_cell').hide();
  $('#power_stat_cell').hide();
  $('#max_fuel_label_cell').hide();
  $('#current_fuel_label_cell').hide();
  $('#max_fuel_cell').hide();
  $('#current_fuel_cell').hide();
  $('#read_powers_span').hide();
<% elsif @splat.name == "Hunter" %>
  $('#nature_label_cell').show();
  $('#nature_id_cell').show();
  $('#ideology_label_cell').show();
  $('#ideology_id_cell').show();
  $('#read_nature_span').show();
  $('#read_ideology_span').show();
  $('#power_stat_label_cell').hide();
  $('#power_stat_cell').hide();
  $('#max_fuel_label_cell').hide();
  $('#current_fuel_label_cell').hide();
  $('#max_fuel_cell').hide();
  $('#current_fuel_cell').hide();
  $('#read_powers_span').hide();
<% else %>
  $('#nature_label_cell').show();
  $('#nature_id_cell').show();
  $('#ideology_label_cell').show();
  $('#ideology_id_cell').show();
  $('#read_nature_span').show();
  $('#read_ideology_span').show();
  $('#power_stat_label_cell').show();
  $('#power_stat_cell').show();
  $('#max_fuel_label_cell').show();
  $('#current_fuel_label_cell').show();
  $('#max_fuel_cell').show();
  $('#current_fuel_cell').show();
  $('#read_powers_span').show();
<% end %>

<% if @splat.name != "Changeling" %>
  $('#subnature_label_cell').hide();
  $('#subnature_id_cell').hide();
<% else %>
  $('#subnature_label_cell').show();
  $('#subnature_id_cell').show();
<% end %>

// show shit that spirits don't have
e = $('#power_row').children().first();
$(e).hide(); // power
$(e).next().hide(); // power
$(e).next().next().show(); // intelligence
$(e).next().next().next().show(); // intelligence
$(e).next().next().next().next().show(); // strength
$(e).next().next().next().next().next().show(); // strength
$(e).next().next().next().next().next().next().show(); // presence
$(e).next().next().next().next().next().next().next().show(); // presence

e = $('#finesse_row').children().first();
$(e).hide(); // finesse
$(e).next().hide(); // finesse
$(e).next().next().show(); // wits
$(e).next().next().next().show(); // wits
$(e).next().next().next().next().show(); // dexterity
$(e).next().next().next().next().next().show(); // dexterity
$(e).next().next().next().next().next().next().show(); // manipulation
$(e).next().next().next().next().next().next().next().show(); // manipulation

e = $('#resistance_row').children().first();
$(e).hide(); // resistance
$(e).next().hide(); // resistance
$(e).next().next().show(); // resolve
$(e).next().next().next().show(); // resolve
$(e).next().next().next().next().show(); // stamina
$(e).next().next().next().next().next().show(); // stamina
$(e).next().next().next().next().next().next().show(); // composure
$(e).next().next().next().next().next().next().next().show(); // composure

$('#skills_header').show();
$('#skills').show();
$('#merits_header').show();
$('merits').show();
$('#equipment_header').show();
$('#equipment').show();

$('#mage_powers').hide();
$('#woof_powers').hide();
$('#vampire_powers').hide();
$('#promethean_powers').hide();
$('#changeling_powers').hide();
$('#hunter_powers').hide();
$('#geist_powers').hide();
$('#spirit_powers').hide();

<% case @splat.name
  when "Mage" then %> $('#mage_powers').slideDown();
  <% when "Werewolf" then %> $('#woof_powers').slideDown();
  <% when "Vampire" then %> $('#vampire_powers').slideDown();
  <% when "Promethean" then %> $('#promethean_powers').slideDown();
  <% when "Changeling" then %> $('#changeling_powers').slideDown();
  <% when "Hunter" then %> $('#hunter_powers').slideDown();
  <% when "Geist" then %> $('#geist_powers').slideDown();
  <% when "Spirit" then %>
	  $('#attributes').children().children().children().each( function() {
		  $(this).toggle();
	  });
	  $('#skills_header').hide();
	  $('#skills').hide();
	  $('#merits_header').hide();
	  $('merits').hide();
	  $('#equipment_header').hide();
	  $('#equipment').hide();
	  $('#spirit_powers').slideDown();
<% end %>
